{"ast":null,"code":"import{useState,useCallback,useEffect}from\"react\";import{Icon,Modal,callGemini,Loader}from'./helpers';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SmartStatusModal=_ref=>{let{isOpen,onClose,parcelData}=_ref;const[status,setStatus]=useState('');const[isLoading,setIsLoading]=useState(false);const[error,setError]=useState(null);const fetchSmartStatus=useCallback(async()=>{if(!parcelData)return;setIsLoading(true);setError(null);setStatus('');const prompt=\"Generate a friendly, one-sentence status update for a parcel with the following details: Tracking ID: \".concat(parcelData.id,\", From: \").concat(parcelData.from,\", To: \").concat(parcelData.to,\", Current Status: \\\"\").concat(parcelData.status,\"\\\". Make it sound like a helpful assistant providing a more detailed, imaginative update.\");try{const smartUpdateText=await callGemini(prompt);setStatus(smartUpdateText);}catch(err){setError('Sorry, we could not fetch the smart status. Please try again later.');}finally{setIsLoading(false);}},[parcelData]);useEffect(()=>{if(isOpen){fetchSmartStatus();}},[isOpen,fetchSmartStatus]);return/*#__PURE__*/_jsxs(Modal,{isOpen:isOpen,onClose:onClose,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between pb-3 border-b border-slate-200\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-slate-900\",children:\"\\u2728 Smart Status Update\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"text-slate-400 hover:text-slate-600\",\"aria-label\":\"Close modal\",children:/*#__PURE__*/_jsx(Icon,{path:\"M6 18L18 6M6 6l12 12\",className:\"w-6 h-6\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 text-slate-600 min-h-[6rem] flex items-center justify-center\",children:[isLoading&&/*#__PURE__*/_jsx(Loader,{}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-center\",children:error}),!isLoading&&!error&&/*#__PURE__*/_jsx(\"p\",{children:status})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 flex justify-end\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"bg-blue-600 text-white text-sm font-medium py-2 px-4 rounded-lg hover:bg-blue-700\",onClick:onClose,children:\"Close\"})})]});};export default SmartStatusModal;","map":{"version":3,"names":["useState","useCallback","useEffect","Icon","Modal","callGemini","Loader","jsx","_jsx","jsxs","_jsxs","SmartStatusModal","_ref","isOpen","onClose","parcelData","status","setStatus","isLoading","setIsLoading","error","setError","fetchSmartStatus","prompt","concat","id","from","to","smartUpdateText","err","children","className","onClick","path","type"],"sources":["E:/Projects/AC/cargotest/cargo_frontend/my-cargo/src/components/SmartStatusModal.js"],"sourcesContent":["import { useState, useCallback, useEffect } from \"react\";\r\nimport { Icon, Modal, callGemini, Loader } from './helpers';\r\n\r\nconst SmartStatusModal = ({ isOpen, onClose, parcelData }) => {\r\n    const [status, setStatus] = useState('');\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [error, setError] = useState(null);\r\n\r\n    const fetchSmartStatus = useCallback(async () => {\r\n        if (!parcelData) return;\r\n        setIsLoading(true);\r\n        setError(null);\r\n        setStatus('');\r\n        const prompt = `Generate a friendly, one-sentence status update for a parcel with the following details: Tracking ID: ${parcelData.id}, From: ${parcelData.from}, To: ${parcelData.to}, Current Status: \"${parcelData.status}\". Make it sound like a helpful assistant providing a more detailed, imaginative update.`;\r\n        try {\r\n            const smartUpdateText = await callGemini(prompt);\r\n            setStatus(smartUpdateText);\r\n        } catch (err) {\r\n            setError('Sorry, we could not fetch the smart status. Please try again later.');\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    }, [parcelData]);\r\n\r\n    useEffect(() => {\r\n        if (isOpen) {\r\n            fetchSmartStatus();\r\n        }\r\n    }, [isOpen, fetchSmartStatus]);\r\n\r\n    return (\r\n        <Modal isOpen={isOpen} onClose={onClose}>\r\n             <div className=\"flex items-center justify-between pb-3 border-b border-slate-200\">\r\n                <h3 className=\"text-lg font-semibold text-slate-900\">âœ¨ Smart Status Update</h3>\r\n                <button onClick={onClose} className=\"text-slate-400 hover:text-slate-600\" aria-label=\"Close modal\">\r\n                    <Icon path=\"M6 18L18 6M6 6l12 12\" className=\"w-6 h-6\" />\r\n                </button>\r\n            </div>\r\n            <div className=\"mt-4 text-slate-600 min-h-[6rem] flex items-center justify-center\">\r\n                {isLoading && <Loader />}\r\n                {error && <p className=\"text-red-500 text-center\">{error}</p>}\r\n                {!isLoading && !error && <p>{status}</p>}\r\n            </div>\r\n            <div className=\"mt-6 flex justify-end\">\r\n                <button type=\"button\" className=\"bg-blue-600 text-white text-sm font-medium py-2 px-4 rounded-lg hover:bg-blue-700\" onClick={onClose}>Close</button>\r\n            </div>\r\n        </Modal>\r\n    );\r\n};\r\nexport default SmartStatusModal;\r\n"],"mappings":"AAAA,OAASA,QAAQ,CAAEC,WAAW,CAAEC,SAAS,KAAQ,OAAO,CACxD,OAASC,IAAI,CAAEC,KAAK,CAAEC,UAAU,CAAEC,MAAM,KAAQ,WAAW,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE5D,KAAM,CAAAC,gBAAgB,CAAGC,IAAA,EAAqC,IAApC,CAAEC,MAAM,CAAEC,OAAO,CAAEC,UAAW,CAAC,CAAAH,IAAA,CACrD,KAAM,CAACI,MAAM,CAAEC,SAAS,CAAC,CAAGjB,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAACkB,SAAS,CAAEC,YAAY,CAAC,CAAGnB,QAAQ,CAAC,KAAK,CAAC,CACjD,KAAM,CAACoB,KAAK,CAAEC,QAAQ,CAAC,CAAGrB,QAAQ,CAAC,IAAI,CAAC,CAExC,KAAM,CAAAsB,gBAAgB,CAAGrB,WAAW,CAAC,SAAY,CAC7C,GAAI,CAACc,UAAU,CAAE,OACjBI,YAAY,CAAC,IAAI,CAAC,CAClBE,QAAQ,CAAC,IAAI,CAAC,CACdJ,SAAS,CAAC,EAAE,CAAC,CACb,KAAM,CAAAM,MAAM,0GAAAC,MAAA,CAA4GT,UAAU,CAACU,EAAE,aAAAD,MAAA,CAAWT,UAAU,CAACW,IAAI,WAAAF,MAAA,CAAST,UAAU,CAACY,EAAE,yBAAAH,MAAA,CAAsBT,UAAU,CAACC,MAAM,6FAA0F,CACtT,GAAI,CACA,KAAM,CAAAY,eAAe,CAAG,KAAM,CAAAvB,UAAU,CAACkB,MAAM,CAAC,CAChDN,SAAS,CAACW,eAAe,CAAC,CAC9B,CAAE,MAAOC,GAAG,CAAE,CACVR,QAAQ,CAAC,qEAAqE,CAAC,CACnF,CAAC,OAAS,CACNF,YAAY,CAAC,KAAK,CAAC,CACvB,CACJ,CAAC,CAAE,CAACJ,UAAU,CAAC,CAAC,CAEhBb,SAAS,CAAC,IAAM,CACZ,GAAIW,MAAM,CAAE,CACRS,gBAAgB,CAAC,CAAC,CACtB,CACJ,CAAC,CAAE,CAACT,MAAM,CAAES,gBAAgB,CAAC,CAAC,CAE9B,mBACIZ,KAAA,CAACN,KAAK,EAACS,MAAM,CAAEA,MAAO,CAACC,OAAO,CAAEA,OAAQ,CAAAgB,QAAA,eACnCpB,KAAA,QAAKqB,SAAS,CAAC,kEAAkE,CAAAD,QAAA,eAC9EtB,IAAA,OAAIuB,SAAS,CAAC,sCAAsC,CAAAD,QAAA,CAAC,4BAAqB,CAAI,CAAC,cAC/EtB,IAAA,WAAQwB,OAAO,CAAElB,OAAQ,CAACiB,SAAS,CAAC,qCAAqC,CAAC,aAAW,aAAa,CAAAD,QAAA,cAC9FtB,IAAA,CAACL,IAAI,EAAC8B,IAAI,CAAC,sBAAsB,CAACF,SAAS,CAAC,SAAS,CAAE,CAAC,CACpD,CAAC,EACR,CAAC,cACNrB,KAAA,QAAKqB,SAAS,CAAC,mEAAmE,CAAAD,QAAA,EAC7EZ,SAAS,eAAIV,IAAA,CAACF,MAAM,GAAE,CAAC,CACvBc,KAAK,eAAIZ,IAAA,MAAGuB,SAAS,CAAC,0BAA0B,CAAAD,QAAA,CAAEV,KAAK,CAAI,CAAC,CAC5D,CAACF,SAAS,EAAI,CAACE,KAAK,eAAIZ,IAAA,MAAAsB,QAAA,CAAId,MAAM,CAAI,CAAC,EACvC,CAAC,cACNR,IAAA,QAAKuB,SAAS,CAAC,uBAAuB,CAAAD,QAAA,cAClCtB,IAAA,WAAQ0B,IAAI,CAAC,QAAQ,CAACH,SAAS,CAAC,mFAAmF,CAACC,OAAO,CAAElB,OAAQ,CAAAgB,QAAA,CAAC,OAAK,CAAQ,CAAC,CACnJ,CAAC,EACH,CAAC,CAEhB,CAAC,CACD,cAAe,CAAAnB,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}